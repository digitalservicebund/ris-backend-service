{
  "$schema": "_schema.json",
  "name": "ner",
  "skip_sections": ["reasons", "case_facts", "decision_reasons"],
  "vars": {
    "DOC_TYPE": "(?i)^(urteil|beschluss|entscheidung|versäumnisurteil|verzichtsurteil|zwischenurteil|gerichtsbescheid)$",
    "FED_COURT": "(?i)^(bundesgerichtshof|bgh|bundesfinanzhof|bfh|bundesarbeitsgericht|bag|bundessozialgericht|bsg|bundesverwaltungsgericht|bverwg|bundesverfassungsgericht|bverfg|bundespatentgericht|bpatg)s?$",
    "LOWER_COURT": "(?i)^(Amtsgericht|AG|Landgericht|LG|Oberlandesgericht|OLG|Kammergericht|KG|Arbeitsgericht|ArbG|Landesarbeitsgericht|LAG|Sozialgericht|SG|Landessozialgericht|LSG|Verwaltungsgericht|VG|Verwaltungsgerichtshof|VGH|Verfassungsgerichtshof|VerfGH|Oberverwaltungsgericht|OVG|Finanzgericht|FG|Anwaltsgerichtshof|AGH|Rheins?schiffahrtsobergericht)s?$",
    "LANDES": "^(Sächsisches|Bayerisches|Hessisches|Brandenburgisches|Thüringisches|Thüringer|Berliner|Hamburgisches|Bremisches|Schleswig-Holsteinisches|Niedersächsisches)$",
    "FN_SUFFIX": "^(WEG|B|E|F|jur|jug|U|G|Z|K|AO|GrE|Erb|WS|KfH|BET|BerH|VA|Rae|ER|RHSch|RhSch|BSch)$",
    "TITLE_OR_UPPER": "^([A-ZÄÖÜ][A-Za-zÄÖÜäöüß\\-]+)$"
  },
  "rules": [
    {
      "name": "datum",
      "extractions": [{ "label": "date" }],
      "patterns": [
        "\\d+\\.?\\s+(?:Januar|Februar|März|April|Mai|Juni|Juli|August|September|Oktober|November|Dezember)\\s+\\d{4}",
        "(?i)^verkündet\\s+am\\s+(\\d{1,2}\\.\\d{1,2}\\.\\d{4})",
        "(\\d{1,2}\\.\\d{1,2}\\.\\d{4})"
      ],
      "normalizers": ["date_to_iso"]
    },
    {
      "name": "datum_verhandlung",
      "extractions": [{ "label": "date", "priority": 1 }],
      "patterns": [
        "(?i)verhandlung\\s+vom\\s+(\\d+.?\\s+(?:Januar|Februar|März|April|Mai|Juni|Juli|August|September|Oktober|November|Dezember)\\s+\\d{4})"
      ],
      "normalizers": ["date_to_iso"],
      "skip_sections": ["tenor"]
    },
    {
      "name": "dokumenttyp",
      "extractions": [{ "label": "document_type" }],
      "patterns": [[{ "TEXT": { "REGEX": "$DOC_TYPE" } }]]
    },
    {
      "name": "gericht",
      "extractions": [{ "label": "court" }],
      "patterns": [
        [{ "TEXT": { "REGEX": "$FED_COURT" } }],
        [
          { "TEXT": { "REGEX": "$LOWER_COURT" } },
          { "IS_TITLE": true },
          { "TEXT": { "REGEX": "^[IVX]+$" }, "OP": "?" }
        ],
        [
          { "TEXT": { "REGEX": "$LOWER_COURT" } },
          { "TEXT": "des" },
          { "TEXT": "Landes", "OP": "?" },
          { "IS_TITLE": true }
        ],
        [
          { "TEXT": { "REGEX": "$LOWER_COURT" } },
          { "TEXT": "für" },
          { "TEXT": "das" },
          { "TEXT": "Land" },
          { "IS_TITLE": true }
        ],
        [
          { "TEXT": { "REGEX": "$LOWER_COURT" } },
          { "IS_TITLE": true },
          { "LOWER": { "IN": ["am", "an", "der", "vor", "dem"] }, "OP": "+" },
          { "IS_TITLE": true }
        ],
        [
          { "TEXT": { "REGEX": "$LANDES" } },
          { "TEXT": { "REGEX": "$LOWER_COURT" } }
        ],
        [{ "TEXT": { "REGEX": "$LOWER_COURT" } }, { "IS_UPPER": true }],
        [{ "TEXT": { "REGEX": "(?i)(finanzgericht)$" } }, { "IS_UPPER": true }]
      ],
      "greedy": "LONGEST",
      "normalizers": ["normalize_court"]
    },
    {
      "name": "gericht_in_tabelle",
      "extractions": [{ "label": "court", "priority": 1 }],
      "patterns": [
        [{ "TEXT": { "REGEX": "$LOWER_COURT" } }, { "IS_TITLE": true }],
        [{ "TEXT": { "REGEX": "$LOWER_COURT" } }, { "IS_UPPER": true }]
      ],
      "conditions": ["is_table"],
      "skip_sections": ["tenor"],
      "normalizers": ["normalize_court"]
    },
    {
      "name": "gericht_header",
      "extractions": [{ "label": "court", "priority": 3 }],
      "patterns": [[{ "TEXT": { "REGEX": "$FED_COURT" } }]],
      "conditions": ["is_first_line"],
      "normalizers": ["normalize_court"]
    },
    {
      "name": "aktenzeichen",
      "extractions": [{ "label": "file_number" }],
      "_comments": [
        "a) [Senate] [Register] [Number] [/] [Year]: 'III ZR 407/23', '1 StR 299/25', 'VIa ZR 135/22', 'WpSt (R) 1/24', 'AnwZ (Brfg) 20/252'",
        "aa) ... same + ()",
        "b) Longer patterns: '2 KLs 500 Js 22402/22', 'VIII KLs 104 Js 27144/23', '2 KLs 500 Js 22402/22 (3)', '12 KLs 119/24 jug (3)', '(544 KLs) 254 Js 243/20 (22/20)', '68 KLs-609 Js 1029/21-18/21'",
        "c) [number(letter)?] [letter] [number] [/] [year]: '16a U 172/19'",
        "d) [number] [-] [number] [letter] [number] [/] [year]: '2-23 O 177/20', 'I-34 U 141/19'",
        "e) [IVX-number] [letter] [number] [/] [year]: 'I-34 U 141/19'",
        "f) [number] [IVX] [letter] [number]: '27 XVII S 3644'"
      ],
      "patterns": [
        [
          { "IS_DIGIT": true, "OP": "?" },
          { "TEXT": { "REGEX": "^[A-Za-z0-9]+$" } },
          { "TEXT": "(", "OP": "?" },
          { "IS_ALPHA": true, "OP": "?" },
          { "TEXT": ")", "OP": "?" },
          { "IS_DIGIT": true },
          { "TEXT": "/" },
          { "IS_DIGIT": true },
          { "TEXT": { "REGEX": "$FN_SUFFIX" }, "OP": "?" }
        ],
        [
          { "IS_DIGIT": true, "OP": "?" },
          { "TEXT": { "REGEX": "^[A-Za-z0-9]+$" } },
          { "TEXT": "(", "OP": "?" },
          { "IS_ALPHA": true, "OP": "?" },
          { "TEXT": ")", "OP": "?" },
          { "IS_DIGIT": true },
          { "TEXT": "/" },
          { "IS_DIGIT": true },
          { "TEXT": { "REGEX": "$FN_SUFFIX" }, "OP": "?" },
          { "TEXT": "(" },
          { "TEXT": { "REGEX": "^\\w{1,4}$" }, "OP": "?" },
          { "TEXT": ")" }
        ],
        "(\\d+ KLs( |-)\\d+ Js \\d+/\\d+( |-)\\d+/\\d+)",
        [
          { "TEXT": "(", "OP": "?" },
          { "TEXT": { "REGEX": "^[IVX0-9]+[abcd]?$" }, "OP": "?" },
          { "TEXT": { "REGEX": "^[A-Za-z]{1,4}$" }, "OP": "?" },
          { "TEXT": ")", "OP": "?" },
          { "IS_DIGIT": true },
          { "IS_ALPHA": true },
          { "IS_DIGIT": true },
          { "TEXT": "/" },
          { "IS_DIGIT": true },
          { "TEXT": { "REGEX": "$FN_SUFFIX" }, "OP": "?" },
          { "TEXT": "(", "OP": "?" },
          { "TEXT": { "REGEX": "^\\d{1,4}$" }, "OP": "?" },
          { "TEXT": "/", "OP": "?" },
          { "IS_DIGIT": true, "OP": "?" },
          { "TEXT": ")", "OP": "?" }
        ],
        [
          { "TEXT": { "REGEX": "^[0-9]+[a-z]$" } },
          { "IS_ALPHA": true },
          { "IS_DIGIT": true },
          { "TEXT": "/" },
          { "IS_DIGIT": true }
        ],
        [
          { "TEXT": { "REGEX": "^[0-9]{1,2}$" } },
          { "TEXT": "-" },
          { "TEXT": { "REGEX": "^[0-9]{1,3}$" } },
          { "IS_ALPHA": true },
          { "IS_DIGIT": true },
          { "TEXT": "/" },
          { "IS_DIGIT": true }
        ],
        [
          { "TEXT": { "REGEX": "^[IVX]{1,2}-[0-9]{1,3}$" } },
          { "IS_ALPHA": true },
          { "IS_DIGIT": true },
          { "TEXT": "/" },
          { "IS_DIGIT": true }
        ],
        [
          { "IS_DIGIT": true },
          { "TEXT": { "REGEX": "^[IVX]+$" } },
          { "IS_ALPHA": true },
          { "IS_DIGIT": true }
        ]
      ],
      "greedy": "LONGEST"
    }
  ]
}
